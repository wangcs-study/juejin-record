# HTTP1.0和HTTP1.1之间有哪些区别
- 连接方面，1.0默认使用非持久连接，1.1默认使用持久连接。1.1通过使用持久连接来使多个http请求复用同一个TCP连接，以此来避免使用非持久连接时每次需要建立连接的时延。
- 资源请求方面，1.0中存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送进来，并且不支持断点续传的功能。1.1则在请求头引入range头域，它允许只请求资源的某个部分，即返回码是206（partial content）。
- 缓存方面，1.0中主要使用header里面的if-modified-since、expires作为缓存判断的标准。1.1则引入了更多的缓存控制策略，例如etag,if-unmodified-since,if-match,if-none-match等
- 1.1中新增了host字段，用来指定服务器的域名。1.0中认为每台服务器都绑定了一个唯一的ip地址，因此请求消息中的URL并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机。并且它们共享一个ip地址。因此有了host字段，这样就可以将请求发往同一台服务器上的不同网站
- 1.1还新增了一些请求方法，如PUT,HEAD,OPTIONS等
# HTTP1.1和HTTP2.0的区别
- 二进制协议：1.1中报文的都信息必须是文本，数据体可以是文本也可以是二进制。2则是一个彻底的二进制协议，头信息和数据体都是二进制，并且统称为“帧”。帧的概念是它实现多路复用的基础。
- 多路复用：2实现了多路复用，2仍然复用TCP连接，但是在一个连接里，客户端和服务器都可以同时发送多个请求或回应，而且不用按照顺序一一发送，这样就可以避免了“队头阻塞”的问题。
- 数据流：2使用了数据流的概念，因为2的数据包是不按顺序发送的，同一个连接里面连续的数据包，可能属于不同的请求。因此，必须对数据包做标记，指出它属于哪个请求。2将每个请求或回应的所有数据包称为一个数据流。每个数据流都有一个独一无二的编号。数据包发送时，都必须标记数据流ID，用来区分它属于哪个数据流。
- 头信息压缩：1.1协议不带状态，每次请求都必须附上所有信息。导致请求的很多都是重复的，比如cookie和user agent，一模一样的内容，每次请求都必须附带，这会浪费很多带库也影响速度。2对这一点做了优化，引入了头信息压缩机制。一方面，头信息使用gzip或compress压缩后再发送；另一方面，客户端和服务器同时维护一个一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引号，这样就能提高速度了。
- 服务器推送：2允许服务器未经请求，主动向客户端发送资源，这叫做服务器推送。2主动推送的是静态资源和websocket等方式向客户端发送即时数据的推送是不同的。
# 什么是队头阻塞
队头阻塞是由http基本的“请求-应答”模型导致的。http规定报文必须是“一发一收”，这就形成了一个先进先出的“串行”队列。队列里面的请求是没有优先级的，只是入队的先后顺序，排在最前面的请求会被优先处理。如果队首的请求因为处理的太慢耽误了时间，那么队列里后面的所有请求也不得不跟着一起等待，结果就是其他请求承担了不应有的时间成本，造成了队头阻塞现象。
## 解决方案
1. 并发连接：对于一个域名允许分配多个长连接，那么相当于增加了任务队列，不至于一个队伍的任务阻塞其他所有任务
2. 域名分片：将域名分出很多二级域名，它们都指向同样的一台服务器，能够并发的长连接数变多。
# HTTP和HTTPS协议的区别
- https协议需要CA证书，费用较高；而http协议不需要
- https是具有安全性的SSL加密传输协议；http是超文本传输协议，信息是明文传输的
- 使用不同的连接方式，端口也不同，https的端口是443，http的端口是80
- http协议连接很简单，是无状态的；HTTPS协议是有SSL和http协议构建的可进行加密传输、身份认证的网络协议，比http安全
# GET方法URL长度限制的原因
实际上http协议并没有对get方法请求的URL长度进行限制，这个限制是特定的浏览器及服务器对它的限制。IE对URL长度的限制是2083字节（2k+35）.
get的长度值= URL(2083) - (你的domain+path) - 2(2是get请求中?=两个字符的长度)
# 一个页面从输入URL到页面加载显示完成，这个过程中都发生了什么
1. 解析URL：首先会对URL进行解析，分析所需要使用的传输协议和请求的资源路径。
2. 缓存判断：浏览器会判断所请求的资源是否存在缓存里，如果请求的资源在缓存里并且没有失效，那么就直接使用，否则向服务器发起新的请求
3. DNS解析：下一步首先需要获取的是输入的URL中的域名的ip地址，首先会判断本地是否有该域名的IP地址缓存，如果有则使用，如果没有则向本地DNS服务器发起请求。本地DNS服务器也会检查是否存在缓存，如果没有就会先向根域名服务器发起请求，获得负责的顶级域名服务器的地址后，再向顶级域名服务器请求，获得负责的权威域名服务器的地址后，再向权威域名服务器发起请求，最终获得域名的ip地址后，本地DNS服务器再将这个IP地址返回给请求的用户。用户本地DNS服务器发起请求属于递归请求，本地DNS服务器向各级域名服务器发起请求属于迭代请求。
4. 获取MAC地址（选说） 当浏览器得到 IP 地址后，数据传输还需要知道目的主机 MAC 地址，因为应用层下发数据给传输层，TCP 协议会指定源端口号和目的端口号，然后下发给网络层。网络层会将本机地址作为源地址，获取的 IP 地址作为目的地址。然后将下发给数据链路层，数据链路层的发送需要加入通信双方的 MAC 地址，本机的 MAC 地址作为源 MAC 地址，目的 MAC 地址需要分情况处理。通过将 IP 地址与本机的子网掩码相与，可以判断是否与请求主机在同一个子网里，如果在同一个子网里，可以使用 APR 协议获取到目的主机的 MAC 地址，如果不在一个子网里，那么请求应该转发给网关，由它代为转发，此时同样可以通过 ARP 协议来获取网关的 MAC 地址，此时目的主机的 MAC 地址应该为网关的地址。
5. TCP三次握手：确认客户端与服务器的接收和发送能力。首先客户端向服务器发送一个SYN连接请求报文段和一个随机序号。服务端接收到请求后向服务器端发送一个SYN ACK报文段，确认连接请求，并且向客户端发送一个随机序号。客户端接收服务器的确认应答后，进入连接建立的状态，同时向服务器发送一个ACK确认报文段，服务器端接收到确认后，也进入连接建立状态，此时双方的连接就建立起来了。
6. HTTPS握手（选说）： 如果使用的是 HTTPS 协议，在通信前还存在 TLS 的一个四次握手的过程。首先由客户端向服务器端发送使用的协议的版本号、一个随机数和可以使用的加密方法。服务器端收到后，确认加密的方法，也向客户端发送一个随机数和自己的数字证书。客户端收到后，首先检查数字证书是否有效，如果有效，则再生成一个随机数，并使用证书中的公钥对随机数加密，然后发送给服务器端，并且还会提供一个前面所有内容的 hash 值供服务器端检验。服务器端接收后，使用自己的私钥对数据解密，同时向客户端发送一个前面所有内容的 hash 值供客户端检验。这个时候双方都有了三个随机数，按照之前所约定的加密方法，使用这三个随机数生成一把秘钥，以后双方通信前，就使用这个秘钥对数据进行加密后再传输。
7. 发送http请求：服务器处理请求，返回http报文
8. 页面渲染：浏览器首先会根据HTML文件建DOM树，根据解析到的CSS文件构建CSSOM树，如果遇到script标签，则判断是否含有defer或者async属性，要不然script的加载和执行会造成页面的渲染阻塞。当DOM树和CSSOM树建立好后，根据它们来构建渲染树。渲染树构建好后，会根据渲染树来进行布局。布局完成后，最后使用浏览器的UI接口对页面进行绘制。这个时候整个页面就显示出来了。
9. TCP四次挥手：也就是TCP断开连接的过程。若客户端认为数据发送完成，则它需要向服务器发送连接释放的请求。服务端收到连接释放请求后，会告诉应用层要释放TCP连接。然后会发送ACK包，并进入CLOSE_WAIT状态，此时表明客户端到服务端的连接已经释放，不再接收客户端发的数据了。但是因为TCP是双向的，所以服务端仍旧可以发送数据给客户端。服务端如果此时还有没发完的数据会继续发送，完毕后会向客户端发送连接释放的请求，然后服务端进入TIME-WAIT状态。该状态会持续2MSL(最大段生存期，指报文段在网络中生存的时间，超时会被抛弃)时间，若该时间段内没有服务端重发请求的话，就进入CLOSED状态。当服务端收到确认应答后，也便进入CLOSED状态。
# HTTP协议的优点和缺点
HTTP是超文本传输协议，它定义了客户端和服务器之间交换报文的格式和方式，默认使用80端口。它使用TCP作为传输层协议，保证了数据传输的可靠性。

HTTP协议具有以下优点：
- 支持客户端/服务器模式
- 简单快速：客户向服务器请求服务时，只需传递请求方法和路径。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。
- 无连接：就是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接，采用这种方式可以节省传输时间。
- 无状态：HTTP协议是无状态协议，这里的状态是指通信过程的上下文信息。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能会导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就比较快。
- 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记

HTTP协议具有以下缺点
- 无状态：HTTP是一个无状态协议，HTTP服务器不会保存关于客户的任何信息
- 明文传输：协议中的报文使用的是文本形式，这样就直接暴露给外界，不安全。
- 不安全：（1）通信使用明文（不加密），内容可能会被窃听；（2）不验证通信方的身份，因此有可能遭遇伪装；（3）无法证明报文的完整性，所以有可能已遭篡改
# HTTP的两种连接模式
- 非持续连接：指的是服务器必须为每一个请求的对象建立和维护一个全新的链接
- 持续连接：TCP默认不关闭，可以被多个请求复用。采用持续连接的好处是可以避免每次建立TCP连接三次握手时所花费的时间
# 与缓存相关的HTTP请求头有哪些
强缓存：
- Expires
- Cache-Control
  
协商缓存：
- Etag、If-None-Match
- Last-Modified、If-Modified-Since
# 强缓存和协商缓存
1. 强缓存：不会向服务器发送请求，直接从缓存中读取资源，在Chrome控制台的network选项中可以看到该请求返回200的状态码，并且size显示from disk cache或 from memory cache两种（灰色表示缓存）
2. 协商缓存：向服务器发送请求，服务器会根据这个请求的request header的一些参数来判断是否命中协商缓存，如果命中，则返回304状态并带上新的response header通知浏览器从缓存中读取资源
# HTTP的keep-alive有什么作用
http1.0默认关闭，需要手动开启。http1.1后默认开启
作用：使客户端到服务器端的链接持续有效（长连接），当出现对服务器的后续请求时，keep-alive功能避免了建立或者重新建立链接。
使用方法：在请求头中加上Connection:keep-alive.

优点：
- 较少的CPU和内存的占用（因为要打开的连接数变少了，复用了连接）
- 减少了后续请求的延迟（无需再进行握手）

缺点：本来可以释放的资源仍旧被占用。有的请求已经结束了，但是还一直连接着。

解决方法：服务器设置过期时间和请求次数。超过这个时间或者次数就断掉连接
# OSI的七层模型是什么

OSI在功能上可以划分为两组：

网络群组：物理层、数据链路层、网络层

使用者群组：传输层、会话层、表示层、应用层
|OSI七层网络模型|TCP/IP四层概念模型|对应网络协议|
|---|---|---|
|7：应用层|应用层|HTTP、RTSP\TFTP(简单文本传输协议)、FTP、NFS（数域筛法，数据加密）、WAIS(广域信息查询系统)|
|6：表示层|应用层|Telnet(internet远程登陆服务的标准协议)、Rlogin、SNMP(网络管理协议)、Gopher|
|5：会话层|应用层|SMTP(简单邮件传输协议)、DNS(域名系统)|
|4：传输层|传输层|TCP(传输控制协议)、UDP(用户数据报协议)|
|3：网络层|网际层|ARP(地域解析协议)、RARP、AKP、UUCP|
|2：数据链路层|数据链路层|FDDI(光纤分布式数据接口)、Ethernet、Arpanet、PDN(公用数据网)、SILP、PPP|
|1：物理层|物理层|SMTP、DNS|

其中高层（7、6、5、4层）定义了应用程序的功能，下面三层（3、2、1层）主要面向通过网络的端到端的数据流
# HTTP状态码分别代表什么意思
1. 2XX 成功
   - 200 OK，表示从客户端发来的请求在服务器端被正确处理
   - 204 No Content，表示请求成功，但响应报文不含实体的主体部分
   - 206 Partial Content，进行的是范围请求，表示服务器已经成功处理了部分GET请求
2. 3XX 重定向
   - 301 moved permanently，永久性重定向，表示资源已被分配了新的URL
   - 302 found，临时性重定向，表示资源临时被分配了新的URL，支持搜索引擎优化
   - 303 see other，表示资源存在着另一个URL，应使用get方法获取资源


















